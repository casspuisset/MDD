<app-nav-bar></app-nav-bar>
<button mat-icon-button routerLink="../../feed" aria-label="Retour">
  <mat-icon>arrow_back</mat-icon>
</button>
<form [formGroup]="createForm" (ngSubmit)="onSubmit()">
  <div>
    <select formControlName="topicId" [class.placeholder]="!createForm.get('topicId')?.value">
      <option value="" disabled selected>Sélectionnez un thème</option>
      @for (topic of topics(); track topic.id) {
      <option [value]="topic.id">{{ topic.name }}</option>
      }
    </select>
    @if (createForm.get('topicId')?.errors?.['required'] && createForm.get('topicId')?.touched) {
    <div>Le thème est requis</div>
    }
  </div>

  <div>
    <input type="text" formControlName="title" placeholder="Titre de l'article" required />
    @if (createForm.get('title')?.errors?.['required'] && createForm.get('title')?.touched) {
    <div class="error-message">Le titre est requis</div>
    }
  </div>

  <div>
    <textarea formControlName="description" placeholder="Contenu de l'article"></textarea>
    @if (createForm.get('description')?.errors?.['required'] && createForm.get('content')?.touched)
    {
    <div>Le contenu est requis</div>
    }
  </div>

  <button
    type="submit"
    [disabled]="createForm.invalid"
    [title]="createForm.invalid ? 'Formulaire invalide' : 'Créer un article'"
  >
    Créer
  </button>
</form>
