# MDD

## Language

MDD frontend was build with Angular CLI 20.3.6 and use node 22.21.0.

For the backend and the API, this application uses Java 17 with Spring Boot 3.5.7.

The database is in mySql.

## Init DB

```sql
DROP DATABASE IF EXISTS `MDDDB`;

CREATE DATABASE `MDDDB`;

USE `MDDDB`;

CREATE TABLE `TOPICS` (
  `id` INT PRIMARY KEY AUTO_INCREMENT,
  `name` VARCHAR(40),
  `description` VARCHAR(2000)
);

CREATE TABLE `ARTICLES` (
  `id` INT PRIMARY KEY AUTO_INCREMENT,
  `title` VARCHAR(50),
  `description` VARCHAR(2000),
  `topic_id` INT,
  `creator_id` INT,
  `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE `USERS` (
  `id` INT PRIMARY KEY AUTO_INCREMENT,
  `name` VARCHAR(255),
  `email` VARCHAR(255),
  `password` VARCHAR(255),
  `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE `COMMENTS` (
  `id` INT PRIMARY KEY AUTO_INCREMENT,
  `user_id` INT,
  `article_id` INT,
  `content` VARCHAR(1000),
  `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE `SUBSCRIPTION` (
  `user_id` INT,
  `topic_id` INT
);

ALTER TABLE `ARTICLES` ADD FOREIGN KEY (`topic_id`) REFERENCES `TOPICS` (`id`);
ALTER TABLE `ARTICLES` ADD FOREIGN KEY (`creator_id`) REFERENCES `USERS` (`id`);

ALTER TABLE `SUBSCRIPTION` ADD FOREIGN KEY (`user_id`) REFERENCES `USERS` (`id`);
ALTER TABLE `SUBSCRIPTION` ADD FOREIGN KEY (`topic_id`) REFERENCES `TOPICS` (`id`);

ALTER TABLE `COMMENTS` ADD FOREIGN KEY (`user_id`) REFERENCES `USERS` (`id`);
ALTER TABLE `COMMENTS` ADD FOREIGN KEY (`article_id`) REFERENCES `ARTICLES` (`id`);

INSERT INTO TOPICS (name, description)
VALUES ('JavaScript', 'Description : Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed non risus.'),
       ('Java', 'Description : Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed non risus.'),
       ('Python', 'Description : Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed non risus.'),
       ('Web3', 'Description : Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed non risus.'),
       ('Other', 'Description : Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed non risus.');

```

### Clone project and install dependancies

#### Clone

In your IDE, git clone the project with :

```
https://github.com/casspuisset/MDD
```

#### Frontend

Install npm in the frontend folder :

```
cd MDD/front
npm install
```

#### Backend

Install maven in the backend folder :

```
cd ../back
mvn install
```

Then, create a `ressources` folder on `MDD/back/src/main`. Inside, create a file `application.properties` with :

```
spring.application.name=mddapi
server.port= 3001

security.jwt.key=<YOUR SECURITY KEY>

spring.h2.console.enabled=true

spring.datasource.url=jdbc:mysql://localhost:3306/mdddb
spring.datasource.username= <YOUR DATABASE USERNAME>
spring.datasource.password=<YOUR DATABASE PASSWORD>
spring.jpa.hibernate.ddl-auto=update
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect


springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.enabled=true
```

Don't forget to complete the file with your own passwords and database username.

## Utilisation

You can launch your MDD application by running your backend from the back folder, and using `npm start` in your front folder. Your backend will run on http://localhost:3001/ and your frontend on http://localhost:4200/.

## Documentation

You can access the API documentation generated by Springdoc openAPI on `http://localhost:3001/swagger-ui/index.html`
